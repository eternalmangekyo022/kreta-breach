import requests, time

params = { "id": "659950", "oktatasiId": "7895" }

url = f"https://kcszc-teleki.e-kreta.hu/api/TanuloErtekelesByTanuloApi/GetTanuloErtekelesByTanuloGridTanuloView?sort=&group=&filter=&data=%7B%22tanuloId%22%3A%22{params['id']}%22%2C%22oktatasiNevelesiFeladatId%22%3A%22{params['oktatasiId']}%22%2C%22isOsztalyAtlagMegjelenik%22%3A%22False%22%7D&_={time.ctime()}"

cookie =  "_ga=GA1.2.1816676682.1628019081; _lbid_int=c2395181502dc9fed8f9a9bcfcf4390b; DisplayedPopups=; _gid=GA1.2.1846079489.1642618580; __RequestVerificationToken=U6knbCfE66bFj17_QvH_paTh3RpAH7d__5rccNZIxtuQxkAZxtyFdWS9jPbuBW0KNPNES5BjkN_YEfov3g4xu6FzZjD6SXSW7HEmo5eDg8k1; EUgyUzenetekRecheck=null; FrissitesiDatum=null; kreta.application=chunks:2; kreta.applicationC1=z4U6Y6mI1Ma6WrC-LpOQm_B4paAXZ1fBWjV2tG1rLYVLdAZPkfarfZ8oEIagU0Bgr_dcgmOvjgAWBinAhhpwpDPeiK_RZGBYkIs6CyE3dtziearSJDNGh6Dx81TXcebLbzKcJgaGR-XPdPDxyPHvhIe8NQ0PBr7GzCYC2o6lL8dq-jq8nbBXWL8O_VTTVHBRA8qQIA7nzrgcHihmZpG7WMSLb4ZZSimNtasR2o85u1Mr3Cv-PTH-ctHV52GdtUJaMpK2KC_feRMrGExzsYuF79ZWLSHZTpqSupaPcixBbaZMXyPclM8VDWBrzK1UbCwXcQnTZTHcwHQjjwVhlWudn5U_nsCWvCF04qlr1JwndjIW_yQtKE_0sPLT0jT1D27y4_5e4VSMCgSXrRPTgmsymaoTW4Y-FAJyImfcGEtbrcBxl6wgSIaSwC4f7YziLXXWdPO6o0RkgItD9A_36yRQel7oBf02ehmBOMiEEDFOzztvFy1r1zH0zrE8qdQmZmkt-L1yhD7KFDVQkFYgSUv1M2eqOmEpY26tEVTwzzp6GZ_469vSw9dMxxTxORUj86wTloCZeRLQ9hiRS5U0EzfDp7gJjo2r8DpxvI5U45kEgC_PWJ8Zy3cwBozoL6DgvH30aPfDcIMnr63L6Im39Vj7wx1P92OwkKplfilZfU3accZK4qULUE_vOvGgo8dLLXLsCmeE82OgIA8BXoSBRyRovSqEUPOr6K-ip2xREqJXv97Hit7mN47naK0kA2mwhcQXkPMtKLftJ-7c0hju44mIbK0CiuyYlpj2QLUNI3g4DpcHgHgO6FdTTXZd_U24lJ6m9R8ZpzKeP_F4rrYiyt8tNCNeJWQNnSJ26WDCDUgd9D_qUE595cEOtUgqVmcKCHRmWzkZ_k4AyMcKypzqAx7iRiIom_oOOOYQaHNh7rZRtoKWbVaTFQCr-3MnvCjaFTK8APrbmzM_GTJPI6C0jIcLKdzXFH0i2wAtZH0g2pgydY6556t3LwLYaTFI2ic4Xt3_51_lJoSJlhwDclH-wHY2rKlrsKphs02LLFhwjq9nN1O5MsAt2M83Gotgcxq8omm2u4IKnOGyUWiaipAXYheMbNqniU9uEs_-zRY0Jz_OZV3zS3bFcg3sclvvFm511qJueaOp6luMfVFsPzNIaY2vMeW9GmuHQSUh9-ZphqQCZjRZmFetFpc5A-roEsOSFNkd-jhBmUNdgqyLCLfZez8_KkmmqfEVSfoKiooBN6PFLzMrJ-DAv5KFcPFmz2XO_UZj0XDONoTk6ctiXJFMxT6WxfqhwHTAhRwPg_5WQ7VhPKUWwsp4RBU3fBqqwvlHIbnPGA_RlsElRSHcfNMZXVehgSjibJskcdGiYEXYGQkOixC1Uu0vuxcVoVeHesHsClrEpzYAdHhIYYYSM3XTAz7LiBJEv9Z_qOTa8mRtXYJIXhVJzD19L1h_YnfOHngQ4gk3iI56bgXE8aeMCUVOsOMoJiPQpOzFpB_tukC7ady55m4dUZUKL_8xMvF_raezr75Jz6lL7xUw1nPky_b6f85hvSPFZNIoY-y3PsDbaZI9KQ6FH2SQL9Xi9jboZIjiaqIpZGqMvyQ6v_NJwtomyFXk8DeTrcgKker24hUY7FW13wxIBrIt3dxXJC2BrIYOZofo_yR0mOyQiIHfY7FgQ-S8kd3JAdu_W-OMptJ8LzpYM4iTIfRZ7UQ--2SdRNhWDNo9tUsvkwrNYGiwXr7ewTZGI3fCJ-6DdE8J4rd5Nw8CgMrfMkt_pPsU1lwc0aEXV6JGPE4zdhgvEzzDVBd0Q6kkh-05o6aBtiAH10x5y1WmcdwdHX-qZSvWwtAV_TCTfZzdrdwNO06HKbSdmmloqVXe9uZcxO47pKE5_TEh_f4iyBLmTgDZ8XdRZc3Su64NRa0BeFFCqj79_57F7OP7N7rs8Q98_T5CEKVKiU7s6OSrnac612O_rHHq72DK6PK6OeZIS1wp3ap1OBe4LRCM4Ntb7gn1Ch65ks0Jl83wytbUNLthBUlknFpRNGpFJKT47mokSdNqn8memXS7wUSesqwj_SwBVa9YS0U1Y2uMYzWyTwDWYGpcUCoT5roDI4dDr7JKAdnNipv7eQ6q30XfynNka6Hqx9y7Tnck00pPxZzw2wtzCNadvV34rgvcrs_iSVp5brG6Ov6TtyMRP93qvkiWeBUMTbpIGgsTPYdmbogmZ8uUtbMVPkVkk-AMzvtsCUy_7kXmuLfKpvjQBGFSbrwg15UPO_s1FhJot3elWCczQqUOkgx58RaG5wAn_lqQz0hvPpEJQyJRWf5undz4ceXDnZwj5oMC1MB7oh6QvkdVtghoGLdqPdlGDVgx14Q1zVTwO0RF8ggtvmOyhKzjx8oa86Xwp5Yg-YlbU0QusRyhqfIICs23eoqJk_9V8hyH4dEtC0Nzm9Xm3rQVCgnBtc3lAPugmclBrxqtacPuGTdvuBiasbHqJyZZpoM7WI5pzPFuwspnBzM3zIXVXj8Fu9XHLt-T3gMjkZOtZNF-5uzE50Xcc4TCXi9IxNoH1tz6jFf7ppTTqd3EZ_BzAD3MGYwlBVakc4R9GYPZixZ1kM6YLyOUej-KrTqjS7z6EqQa19w8uzDFUY6_L9y1chWctbG49rUrlE9LbF9-k9nNikSYTbOOUpF0EM74zytzktm8h_a8eCcx3s6QSJiSQtV6F2urJLmcKkSktUkILy6gzW9yyvXhANmHxlcY9pIfNfl-GxTm_jx-gqYNQz2QfUhD64mXbxP41I38AlqURBsa_R8TbdiQwb-z3tB47tuBNvGC8RC0XsLB9HGGuOXG01jI7EnjzfiAmX2drjh1XRa7qG0JYWWsVKj_2YITJTkboJp5V2H3fzhkYRACEnKr_27xBUQS4SIiy9SpBNnoMpdOx8ZVAWazuEP6cIfQHh_UOM_NUkq3q6LpsvSsxNruysgRL70rS_hYaTwnrBWldTOc58rQNInPmEnuKW0zHl6KmF-xQyTduRKLBpugcFKxenAkprWaz-08EaGAJCidUR_7H1juUlOHm3sgK0gEirQABu94Y-Epn9su3W0lyAkZ61AsRyOEFplraLuQfKcXnxiqo3hcLhOaog8zpkPXueDY7ShzbqKEGXJ9f3RVq89TaakCzStyQ9m-an429L6rkygSPNwR9Hz_zcR5Wm_mSNEdt3JitapiD1QlzcBPpGU47Mu2HdJwX3tXpYrtE9yiMtKwQuKXOFB7BrRyWZBu3hp50w2wAtFePSex2nhk5GvmTI_pgknRKvv6Nbuh-LaWYfutmXp36AcWJxg4E6_PkL-mTPmiRZNmEul_eMAoDTp_RAug2R7oSQAXrbRdeMgYTtwC8_v0uL4Or0MudfBn-fcQXJaK9kSV33wNeQkdHcIec9cHGn5mElkOIH39Y45VS3Vd6uF6cRzjWehUOEyalMNM8oY8hZI02uaMWa3URkMviS7ruvddkY7Qy1aB1cbUWZR-WGvd1bkhTzso8hK757IW5ygqf-zrayxdfgtmN2xl3Zhg6BEFIWYPU-isQOcSrPIlhvxLNCIrx_V4tDQg8liScKtfVw82iLaNqUD6-Ak0XbbgfWNlMI3emrBHJ9D7YapltgskI4dh9cCt1yskD-z3k2hei9I5MWtv5SPFxVgNC0t2USuTR51V_ghjN4lUoiJvpprXwHnXOHgHgdReeru6uib2Qlqo77vZ7AuwQw-GrmRHXv7w_v1CqrxWi_iJ4imsfagFulgahY9UFyCeCOcYLo04iQVq_X0TrH4XZ4HByhHnfFH7R62VMRdPlh-NijIz2LrN66KXHsR508LXWSLbBTJkOW3KhZTPnPKyH-gQirANuERkRNpPFTteKjRTbU0ziD7WE_F9TC7BKkxqLE7el6eCP7rbAiHLSChHgj811Q7grOk_kkSya2qBWfG6I3MWCZwApPGn_uNtm4k142-pvfCGTMIbiwmXa-HKnFq914QGAecUP7mWo3wglWEu7i0ENwFLN8_vV4DWT15kUfOnHf2-; kreta.applicationC2=VSpVbdkfFnBtQeLaAKF-8bnG5AU_tdo1c5uy_v6Z9y_WvhSN-79Y6jCjP8TS0vYafIsuWKEPoj7Wf6GgYn6UDKbu7ogEGa1UKihTdrsaXzUMxkQ"

r = requests.get(url, headers={ "Cookie": cookie })
grades = r.json()["Data"]

grades = list(map(lambda x: { "subject": x["TantargyNev"], "average": x["Atlag"] }, grades))

def calcOverallAverage():
    final = 0
    temp = [e for e in grades if e["average"] != None]
    for i in temp:
        final += i["average"]

    return final / len(temp)

for i in grades:
    print(i)

print(calcOverallAverage())